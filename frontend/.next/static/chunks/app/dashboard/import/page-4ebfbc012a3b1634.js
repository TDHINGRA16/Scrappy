(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[287],{43:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});var r=t(2149);function a(e){let s=r.useRef({value:e,previous:e});return r.useMemo(()=>(s.current.value!==e&&(s.current.previous=s.current.value,s.current.value=e),s.current.previous),[e])}},900:(e,s,t)=>{"use strict";t.d(s,{p:()=>l});var r=t(8081),a=t(2149),i=t(7687);let l=a.forwardRef((e,s)=>{let{className:t,type:a,...l}=e;return(0,r.jsx)("input",{type:a,className:(0,i.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:s,...l})});l.displayName="Input"},4666:(e,s,t)=>{"use strict";t.d(s,{T:()=>l});var r=t(8081),a=t(2149),i=t(7687);let l=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)("textarea",{className:(0,i.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:s,...a})});l.displayName="Textarea"},5516:(e,s,t)=>{"use strict";t.d(s,{X:()=>i});var r=t(2149),a=t(9572);function i(e){let[s,t]=r.useState(void 0);return(0,a.N)(()=>{if(e){t({width:e.offsetWidth,height:e.offsetHeight});let s=new ResizeObserver(s=>{let r,a;if(!Array.isArray(s)||!s.length)return;let i=s[0];if("borderBoxSize"in i){let e=i.borderBoxSize,s=Array.isArray(e)?e[0]:e;r=s.inlineSize,a=s.blockSize}else r=e.offsetWidth,a=e.offsetHeight;t({width:r,height:a})});return s.observe(e,{box:"border-box"}),()=>s.unobserve(e)}t(void 0)},[e]),s}},6981:(e,s,t)=>{Promise.resolve().then(t.bind(t,8546))},7890:(e,s,t)=>{"use strict";t.d(s,{J:()=>d});var r=t(8081),a=t(2149),i=t(9591),l=t(3484),n=t(7687);let o=(0,l.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),d=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)(i.b,{ref:s,className:(0,n.cn)(o(),t),...a})});d.displayName=i.b.displayName},8022:(e,s,t)=>{"use strict";t.d(s,{A:()=>r});let r=(0,t(1018).A)("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]])},8091:(e,s,t)=>{"use strict";t.d(s,{C:()=>d,z:()=>o});var r=t(8081),a=t(2149),i=t(8924),l=t(8022),n=t(7687);let o=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)(i.bL,{className:(0,n.cn)("grid gap-2",t),...a,ref:s})});o.displayName=i.bL.displayName;let d=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)(i.q7,{ref:s,className:(0,n.cn)("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),...a,children:(0,r.jsx)(i.C1,{className:"flex items-center justify-center",children:(0,r.jsx)(l.A,{className:"h-2.5 w-2.5 fill-current text-current"})})})});d.displayName=i.q7.displayName},8546:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>x});var r=t(8081),a=t(2149),i=t(9651),l=t(5160),n=t(900),o=t(4666),d=t(6810),c=t(7890),u=t(6247),h=t(8091),m=t(7849),p=t(186),f=t(7363);function x(){let e=(0,i.useRouter)(),[s,t]=(0,a.useState)(null),[x,v]=(0,a.useState)(""),[j,g]=(0,a.useState)("A:Z"),[b,y]=(0,a.useState)("Hi {name}, I'd like to connect with you about your business."),[w,N]=(0,a.useState)("email"),[C,S]=(0,a.useState)(""),[k,R]=(0,a.useState)(!1),A=async t=>{if(t.preventDefault(),!s){S("Please select a CSV file");return}R(!0),S("");try{let t=localStorage.getItem("token"),r=new FormData;r.append("file",s);let a=await fetch("/api/import/csv",{method:"POST",headers:{Authorization:"Bearer ".concat(t)},body:r}),i=await a.json();if(!a.ok)throw Error(i.detail||"Failed to import CSV");e.push("/dashboard/jobs/".concat(i.job_id))}catch(e){S(e instanceof Error?e.message:"Failed to import CSV")}finally{R(!1)}},E=async s=>{s.preventDefault(),R(!0),S("");try{let s=localStorage.getItem("token"),t=await fetch("/api/import/google-sheets",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(s)},body:JSON.stringify({sheet_id:x,range:j,message_template:b})}),r=await t.json();if(!t.ok)throw Error(r.detail||"Failed to import from Google Sheets");e.push("/dashboard/jobs/".concat(r.job_id))}catch(e){S(e instanceof Error?e.message:"Failed to import from Google Sheets")}finally{R(!1)}};return(0,r.jsxs)("div",{className:"space-y-6 bg-white min-h-screen p-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{style:{height:"50px",width:"250px",marginBottom:"10px"},children:(0,r.jsx)(f.A,{text:"IMPORT DATA",flex:!0,alpha:!1,stroke:!1,width:!0,weight:!0,italic:!0,textColor:"#000000",minFontSize:20})}),(0,r.jsx)("p",{className:"text-muted-foreground",children:"Import contacts from CSV or Google Sheets"})]}),(0,r.jsxs)(u.tU,{defaultValue:"csv",children:[(0,r.jsxs)(u.j7,{className:"grid w-full grid-cols-2",children:[(0,r.jsx)(u.Xi,{value:"csv",children:"CSV Upload"}),(0,r.jsx)(u.Xi,{value:"sheets",children:"Google Sheets"})]}),(0,r.jsx)(u.av,{value:"csv",children:(0,r.jsx)(d.Zp,{children:(0,r.jsxs)("form",{onSubmit:A,children:[(0,r.jsxs)(d.aR,{children:[(0,r.jsx)(d.ZB,{children:"CSV Import"}),(0,r.jsx)(d.BT,{children:"Upload a CSV file with contact information"})]}),(0,r.jsxs)(d.Wu,{className:"space-y-4",children:[C&&(0,r.jsxs)(p.Fc,{variant:"destructive",children:[(0,r.jsx)(m.A,{className:"h-4 w-4"}),(0,r.jsx)(p.TN,{children:C})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(c.J,{htmlFor:"csv-file",children:"CSV File"}),(0,r.jsx)("div",{className:"flex items-center gap-2",children:(0,r.jsx)(n.p,{id:"csv-file",type:"file",accept:".csv",onChange:e=>{var s;return t((null===(s=e.target.files)||void 0===s?void 0:s[0])||null)},required:!0})}),(0,r.jsx)("p",{className:"text-xs text-muted-foreground",children:"CSV should have columns for name, email, and phone."})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(c.J,{children:"Contact Method"}),(0,r.jsxs)(h.z,{value:w,onValueChange:N,children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(h.C,{value:"email",id:"csv-email"}),(0,r.jsx)(c.J,{htmlFor:"csv-email",children:"Email"})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(h.C,{value:"whatsapp",id:"csv-whatsapp"}),(0,r.jsx)(c.J,{htmlFor:"csv-whatsapp",children:"WhatsApp"})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(h.C,{value:"both",id:"csv-both"}),(0,r.jsx)(c.J,{htmlFor:"csv-both",children:"Both"})]})]})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(c.J,{htmlFor:"csv-message",children:"Message Template"}),(0,r.jsx)(o.T,{id:"csv-message",placeholder:"Enter your message template. Use {name} for business name.",value:b,onChange:e=>y(e.target.value),rows:4}),(0,r.jsxs)("p",{className:"text-xs text-muted-foreground",children:["Use ","{name}"," to insert the business name in your message."]})]})]}),(0,r.jsx)(d.wL,{children:(0,r.jsx)(l.$,{type:"submit",disabled:k,children:k?"Importing...":"Import CSV"})})]})})}),(0,r.jsx)(u.av,{value:"sheets",children:(0,r.jsx)(d.Zp,{children:(0,r.jsxs)("form",{onSubmit:E,children:[(0,r.jsxs)(d.aR,{children:[(0,r.jsx)(d.ZB,{children:"Google Sheets Import"}),(0,r.jsx)(d.BT,{children:"Import data from a Google Sheets document"})]}),(0,r.jsxs)(d.Wu,{className:"space-y-4",children:[C&&(0,r.jsxs)(p.Fc,{variant:"destructive",children:[(0,r.jsx)(m.A,{className:"h-4 w-4"}),(0,r.jsx)(p.TN,{children:C})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(c.J,{htmlFor:"sheet-id",children:"Google Sheet ID"}),(0,r.jsx)(n.p,{id:"sheet-id",placeholder:"e.g., 1BxiMVs0XRA5nFMdKvBdBZjgmUUqptlbs74OgvE2upms",value:x,onChange:e=>v(e.target.value),required:!0}),(0,r.jsx)("p",{className:"text-xs text-muted-foreground",children:"The ID is in the URL of your Google Sheet."})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(c.J,{htmlFor:"sheet-range",children:"Sheet Range"}),(0,r.jsx)(n.p,{id:"sheet-range",placeholder:"e.g., A:Z or Sheet1!A2:E",value:j,onChange:e=>g(e.target.value),required:!0})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(c.J,{children:"Contact Method"}),(0,r.jsxs)(h.z,{value:w,onValueChange:N,children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(h.C,{value:"email",id:"sheets-email"}),(0,r.jsx)(c.J,{htmlFor:"sheets-email",children:"Email"})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(h.C,{value:"whatsapp",id:"sheets-whatsapp"}),(0,r.jsx)(c.J,{htmlFor:"sheets-whatsapp",children:"WhatsApp"})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(h.C,{value:"both",id:"sheets-both"}),(0,r.jsx)(c.J,{htmlFor:"sheets-both",children:"Both"})]})]})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(c.J,{htmlFor:"sheets-message",children:"Message Template"}),(0,r.jsx)(o.T,{id:"sheets-message",placeholder:"Enter your message template. Use {name} for business name.",value:b,onChange:e=>y(e.target.value),rows:4}),(0,r.jsxs)("p",{className:"text-xs text-muted-foreground",children:["Use ","{name}"," to insert the business name in your message."]})]})]}),(0,r.jsx)(d.wL,{children:(0,r.jsx)(l.$,{type:"submit",disabled:k,children:k?"Importing...":"Import from Google Sheets"})})]})})})]})]})}},8924:(e,s,t)=>{"use strict";t.d(s,{C1:()=>q,bL:()=>L,q7:()=>D});var r=t(2149),a=t(493),i=t(9264),l=t(3940),n=t(9215),o=t(4427),d=t(3376),c=t(5261),u=t(5516),h=t(43),m=t(6552),p=t(8081),f="Radio",[x,v]=(0,l.A)(f),[j,g]=x(f),b=r.forwardRef((e,s)=>{let{__scopeRadio:t,name:l,checked:o=!1,required:d,disabled:c,value:u="on",onCheck:h,form:m,...f}=e,[x,v]=r.useState(null),g=(0,i.s)(s,e=>v(e)),b=r.useRef(!1),y=!x||m||!!x.closest("form");return(0,p.jsxs)(j,{scope:t,checked:o,disabled:c,children:[(0,p.jsx)(n.sG.button,{type:"button",role:"radio","aria-checked":o,"data-state":C(o),"data-disabled":c?"":void 0,disabled:c,value:u,...f,ref:g,onClick:(0,a.m)(e.onClick,e=>{o||null==h||h(),y&&(b.current=e.isPropagationStopped(),b.current||e.stopPropagation())})}),y&&(0,p.jsx)(N,{control:x,bubbles:!b.current,name:l,value:u,checked:o,required:d,disabled:c,form:m,style:{transform:"translateX(-100%)"}})]})});b.displayName=f;var y="RadioIndicator",w=r.forwardRef((e,s)=>{let{__scopeRadio:t,forceMount:r,...a}=e,i=g(y,t);return(0,p.jsx)(m.C,{present:r||i.checked,children:(0,p.jsx)(n.sG.span,{"data-state":C(i.checked),"data-disabled":i.disabled?"":void 0,...a,ref:s})})});w.displayName=y;var N=e=>{let{control:s,checked:t,bubbles:a=!0,...i}=e,l=r.useRef(null),n=(0,h.Z)(t),o=(0,u.X)(s);return r.useEffect(()=>{let e=l.current,s=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set;if(n!==t&&s){let r=new Event("click",{bubbles:a});s.call(e,t),e.dispatchEvent(r)}},[n,t,a]),(0,p.jsx)("input",{type:"radio","aria-hidden":!0,defaultChecked:t,...i,tabIndex:-1,ref:l,style:{...e.style,...o,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function C(e){return e?"checked":"unchecked"}var S=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],k="RadioGroup",[R,A]=(0,l.A)(k,[o.RG,v]),E=(0,o.RG)(),F=v(),[I,G]=R(k),T=r.forwardRef((e,s)=>{let{__scopeRadioGroup:t,name:r,defaultValue:a,value:i,required:l=!1,disabled:u=!1,orientation:h,dir:m,loop:f=!0,onValueChange:x,...v}=e,j=E(t),g=(0,c.jH)(m),[b,y]=(0,d.i)({prop:i,defaultProp:a,onChange:x});return(0,p.jsx)(I,{scope:t,name:r,required:l,disabled:u,value:b,onValueChange:y,children:(0,p.jsx)(o.bL,{asChild:!0,...j,orientation:h,dir:g,loop:f,children:(0,p.jsx)(n.sG.div,{role:"radiogroup","aria-required":l,"aria-orientation":h,"data-disabled":u?"":void 0,dir:g,...v,ref:s})})})});T.displayName=k;var V="RadioGroupItem",J=r.forwardRef((e,s)=>{let{__scopeRadioGroup:t,disabled:l,...n}=e,d=G(V,t),c=d.disabled||l,u=E(t),h=F(t),m=r.useRef(null),f=(0,i.s)(s,m),x=d.value===n.value,v=r.useRef(!1);return r.useEffect(()=>{let e=e=>{S.includes(e.key)&&(v.current=!0)},s=()=>v.current=!1;return document.addEventListener("keydown",e),document.addEventListener("keyup",s),()=>{document.removeEventListener("keydown",e),document.removeEventListener("keyup",s)}},[]),(0,p.jsx)(o.q7,{asChild:!0,...u,focusable:!c,active:x,children:(0,p.jsx)(b,{disabled:c,required:d.required,checked:x,...h,...n,name:d.name,ref:f,onCheck:()=>d.onValueChange(n.value),onKeyDown:(0,a.m)(e=>{"Enter"===e.key&&e.preventDefault()}),onFocus:(0,a.m)(n.onFocus,()=>{var e;v.current&&(null===(e=m.current)||void 0===e||e.click())})})})});J.displayName=V;var B=r.forwardRef((e,s)=>{let{__scopeRadioGroup:t,...r}=e,a=F(t);return(0,p.jsx)(w,{...a,...r,ref:s})});B.displayName="RadioGroupIndicator";var L=T,D=J,q=B},9591:(e,s,t)=>{"use strict";t.d(s,{b:()=>n});var r=t(2149),a=t(9215),i=t(8081),l=r.forwardRef((e,s)=>(0,i.jsx)(a.sG.label,{...e,ref:s,onMouseDown:s=>{var t;s.target.closest("button, input, select, textarea")||(null===(t=e.onMouseDown)||void 0===t||t.call(e,s),!s.defaultPrevented&&s.detail>1&&s.preventDefault())}}));l.displayName="Label";var n=l},9651:(e,s,t)=>{"use strict";var r=t(4571);t.o(r,"useRouter")&&t.d(s,{useRouter:function(){return r.useRouter}})}},e=>{var s=s=>e(e.s=s);e.O(0,[741,584,266,497,573,358],()=>s(6981)),_N_E=e.O()}]);